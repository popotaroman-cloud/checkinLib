<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Software - Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/admin.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Admin Panel</h2>
                <p>‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</p>
            </div>
            <nav class="sidebar-nav">
                <a href="dashboard.html" class="nav-item">
                    <span class="icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="monitor.html" class="nav-item">
                    <span class="icon">üñ•Ô∏è</span>
                    <span>Monitor</span>
                </a>
                <a href="manage-pc.html" class="nav-item">
                    <span class="icon">üíª</span>
                    <span>Manage PC</span>
                </a>
                <a href="manage-software.html" class="nav-item active">
                    <span class="icon">üì¶</span>
                    <span>Software</span>
                </a>
                <a href="import-reservation.html" class="nav-item">
                    <span class="icon">üì•</span>
                    <span>Import Reservation</span>
                </a>
                <a href="reports.html" class="nav-item">
                    <span class="icon">üìà</span>
                    <span>Reports</span>
                </a>
            </nav>
            <div style="padding: var(--spacing-xl); border-top: 1px solid var(--border);">
                <a href="../user/idle.html?pc=PC-001" style="color: var(--text-secondary); font-size: 0.875rem;">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <div>
                    <h1>Manage Software</h1>
                    <div class="breadcrumb">
                        <a href="dashboard.html">Admin</a>
                        <span>/</span>
                        <span>Software</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="showAddSoftwareModal()">
                    + ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå
                </button>
            </div>

            <!-- Software Table -->
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Software Name</th>
                            <th>Version</th>
                            <th>Category</th>
                            <th>Installed On</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="softwareTableBody">
                        <!-- Rows will be loaded here -->
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Add Software Modal -->
    <div class="modal" id="softwareModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå</h2>
                <button class="modal-close" onclick="closeSoftwareModal()">√ó</button>
            </div>
            <form id="softwareForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="softwareName">Software Name *</label>
                        <input type="text" id="softwareName" required placeholder="Microsoft Office">
                    </div>
                    <div class="form-group">
                        <label for="version">Version</label>
                        <input type="text" id="version" placeholder="2021">
                    </div>
                    <div class="form-group">
                        <label for="category">Category</label>
                        <input type="text" id="category" placeholder="Office Suite">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeSoftwareModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../js/config.js"></script>
    <script src="../js/utils.js"></script>
    <script>
        // Load Software Table
        function loadSoftwareTable() {
            const software = MOCK_DATA.software;
            const tbody = document.getElementById('softwareTableBody');

            tbody.innerHTML = software.map(sw => `
                <tr>
                    <td><strong>${sw.name}</strong></td>
                    <td>${sw.version}</td>
                    <td>${sw.category}</td>
                    <td>
                        <span class="badge badge-primary">
                            ${sw.installedOn.length} ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
                        </span>
                    </td>
                    <td class="table-actions">
                        <button class="btn btn-sm btn-primary" onclick="viewDetails(${sw.id})">
                            View PCs
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteSoftware(${sw.id})">
                            ‡∏•‡∏ö
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function showAddSoftwareModal() {
            document.getElementById('softwareForm').reset();
            document.getElementById('softwareModal').classList.add('active');
        }

        function closeSoftwareModal() {
            document.getElementById('softwareModal').classList.remove('active');
        }

        function viewDetails(swId) {
            const software = MOCK_DATA.software.find(s => s.id === swId);
            alert(`${software.name}\n\n‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏ô:\n${software.installedOn.join(', ')}`);
        }

        function deleteSoftware(swId) {
            const software = MOCK_DATA.software.find(s => s.id === swId);
            if (confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö ${software.name} ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                showAlert('‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            }
        }

        document.getElementById('softwareForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...');
            setTimeout(() => {
                hideLoading();
                showAlert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
                closeSoftwareModal();
            }, 1000);
        });

        // Initialize
        loadSoftwareTable();
    </script>
</body>
</html>
